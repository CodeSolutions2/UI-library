<!DOCTYPE html>
<html>
<head></head>
<body>

<!-- Drop down menu: put in body -->
<label for="select_dropdown_option_label">Select a drop down option:</label>
<select name="dropdown_options" id="dropdown_options" style="display:block">
  <option value="---">Select an option</option>
  <option value="tabs_left">tabs_left</option>
  <option value="tabs_right">tabs_right</option>
  <option value="tabs_left_right">tabs_left_right</option>
  <option value="tabs_round">tabs_round</option>
</select>

<input id="tab_num" type="text" wrap="hard" value="" placeholder="Enter the number of tabs to create" rows="10" cols="100" style="display:none; text-align: left; width: 100px; word-wrap: break-word; word-break: break-all;">

<button id="construct_DOM_elements" onclick='construct_DOM_elements()'>construct_DOM_elements</button>
<button id="construct_DOM_elements_w_strings" onclick='construct_DOM_elements_w_strings()'>construct_DOM_elements_w_strings</button>
	
<div id="display_UI"></div>

<style>
* { margin: 0; padding: 0; box-sizing: border-box; }

/* #ebebeb = light gray */
body { font-family: 'Lato', sans-serif; font-size: 14px; padding: 70px; background: #ebebeb; }

.tabs { display: block; margin-bottom: 30px; }

/* color = text color, background = sets multiple background properties at once, including background-color,  background-color = background color, #32557f = dark blue, #fff = white */
.content-container { 
	position: absolute;
	min-width: 600px; 
	max-width: 600px; 
	display: block; 
	margin-bottom: 1em; 
	background: #32557f; 
	padding: 2em 3em; 
	border-radius: .15em; 
	border: .2em solid #fff; 
	color: #fff;
}

nav { position: relative; z-index: 1; }

nav a { position: relative; width: 10em; display: inline-block; padding: .7em 2em .5em; color: #fff; text-decoration: none; margin: 0 -.3em; }

nav a::before { border: .2em solid #fff; 
	       content: '';
    position: absolute;
    top: 0; right: 0; bottom: 0; left: 0;
    z-index: -1;
    border-bottom: none;
    border-radius: .4em .4em 0 0;
    background: #7eb4e2;
    transform: scale(1.2, 1.3) perspective(.5em) rotateX(5deg);
}

/* #32557f = dark blue */
/* &::before refers to the node_p element before any content is inserted  So, nav when a is active should have a certain background-color and margin-bottom. */
nav a.active { z-index: 2;
  &::before { background-color: #32557f; margin-bottom: -.08em; }
}

/* border-radius: top-left | top-right | bottom-right | bottom-left */
.tab-right {
  nav { padding-left: 0px; }
  nav a { border-radius: 0 5px 0 0; }
}

.tab-left {
  nav { padding-left: 5px; }
  nav a::before { border-radius: 5px 0 0 0; }
}

/* Tabs shifted to the right: #32557f = dark blue, #fff = white */
.tab-left-right {
  nav { padding-left: 5px; }
  nav a { border-radius: 5px 5px 0 0; }
}

/* Tabs with round edges: #32557f = dark blue, #fff = white */
.tab-round {
  nav { padding-left: .3em; }
  nav a {
    padding-top: 13px;
    text-align: center;
    background: #32557f;
    color: #fff;
    border-radius: 30px;
    height: 100px;
    margin-right: 1px;
  }
  nav a::before { margin-bottom: 0; border-radius: none; background: none; transform: none; border: none; }
  nav a.active{ background: #fff; color: #000; margin-bottom: 0; border-radius: 30px; }
  .content-container{
    position: absolute;
    width: 450px;
    height: auto;
    margin-top: -50px;
    margin-bottom: 50px;
    background: #fff;
    color: #000;
    border-radius: 30px;
    z-index: 100;
    box-shadow: 0px 10px 10px rgba(0, 0, 0, .4);
    padding: 30px;
  }
}
</style>
  
<script>
var tabs_container_class;
	
async function processEvent_dropdown_options(event) {

	const element = document.getElementById("dropdown_options");
	console.log('element.selectedIndex: ', element.selectedIndex);
	
	if (document.getElementById("dropdown_options").selectedIndex == 1) {
		tabs_container_class = "tabs tab-left";
	} else if (document.getElementById("dropdown_options").selectedIndex == 2) {
		tabs_container_class = "tabs tab-right";
	} else if (document.getElementById("dropdown_options").selectedIndex == 3) {
		tabs_container_class = "tab-left-right";
	} else if (document.getElementById("dropdown_options").selectedIndex == 4) {
		tabs_container_class = "tab-round";
	}

	document.getElementById("tab_num").style.display = 'block';
}

document.getElementById("dropdown_options").addEventListener("change", processEvent_dropdown_options, false);

// -----------------------------------------

async function construct_DOM_elements_w_strings() {

	const tab_num = document.getElementById("tab_num").value;

	// Create tabs
	var aElement = "";
	for (let i=0; i<tab_num; i++) {
		var aElement_class = i == 0 ? "tabs-nav-link active" : "tabs-nav-link";
		aElement = aElement + `<a class="${aElement_class}" href="#" id="tabs_${i}">Tab ${i}</a>`;
	}

	// Create content under each tab
	var divElement = "";
	var h1Element = "";
	var pElement = "";
	for (let i=0; i<tab_num; i++) {
		h1Element = `<h1 class="content-title" id="tabs_content_title_${i}">Title ${i}</h1>`;
		pElement = `<p class="content-text" id="tabs_content_text_${i}">Text ${i}</p>`;
		divElement = divElement + `<div class="content-container" id="tabs_content_${i}">` + h1Element + pElement + "</div>";
	}
	
	 const htmlString = `<div class="tabs ${tabs_container_class}" id="tabs_container">
		  <nav>
		    ${aElement}
		  </nav>
		  ${divElement}
		</div>`;
	console.log("htmlString: ", htmlString);

	/*
  <div class="tabs tabs tab-right" id="tabs_container">
		  <nav>
		    <a class=tabs-nav-link active href="#" id="tabs_0">Tab 0</a>
      <a class=tabs-nav-link href="#" id="tabs_1">Tab 1</a>
		  </nav>
		  <div class="content-container" id="tabs_content_0">
    <h1 class="content-title" id="tabs_content_title_0">Title 0</h1>
    <p class="content-text" id="tabs_content_text_0">Text 0</p>
    </div>
    <div class="content-container" id="tabs_content_1">
    <h1 class="content-title" id="tabs_content_title_1">Title 1</h1>
    <p class="content-text" id="tabs_content_text_1">Text 1</p>
    </div>
		</div>


	const htmlString = `<div class="tabs ${tabs_container_class}" id="tabs_container">
  <nav>
    <a class="tabs-nav-link active" href="#" id="tabs_Main">Main</a>
    <a class="tabs-nav-link" href="#" id="tabs_About">About</a>
  </nav>
  <div class="content-container" id="tabs_content_Main">
    <h1 class="content-title" id="tabs_content_title_Main">Main Title</h1>
    <p class="content-text" id="tabs_content_text_Main">Main Text</p>
  </div>
  <div class="content-container" id="tabs_content_About">
    <h1 class="content-title" id="tabs_content_title_About">About Title</h1>
    <p class="content-text" id="tabs_content_text_About">About Text</p>
  </div>
</div>`;


*/

	 var htmlNode = document.createRange().createContextualFragment(htmlString);
	 document.getElementById('display_UI').appendChild(htmlNode);

	// Dynamically create addEventListener for each `tabs_${i}`.
	for (let i=0; i<tab_num; i++) {
		await tabs_addEventListener(i, tab_num);
	}

	console.log("tabs_container DOM elements: ", document.getElementById('tabs_container'));
}

// -----------------------------------------
	
async function construct_DOM_elements() {
	
	const tab_num = document.getElementById("tab_num").value;
	
	// Create container
	var divElement_tabs_container = document.createElement("div");
	divElement_tabs_container.class = tabs_container_class;
	divElement_tabs_container.id = "tabs_container";

	// Create tabs
	var navElement = document.createElement("nav");
	for (let i=0; i<tab_num; i++) {
		var aElement = document.createElement("a");
		aElement.class = i == 0 ? "tabs-nav-link active" : "tabs-nav-link";
		aElement.href = "#";
		aElement.id = `tabs_${i}`;
	 	aElement.value = `Tab ${i}`;
		navElement.appendChild(aElement);
	}
	divElement_tabs_container.appendChild(navElement);
	
	// Create content under each tab
	for (let i=0; i<tab_num; i++) {
		var divElement = document.createElement("div");
		divElement.class = "content-container";
		divElement.id = `tabs_content_${i}`;

		var h1Element = document.createElement("h1");
		h1Element.class = "content-title";
		h1Element.id = `tabs_content_title_${i}`;
	 	h1Element.value = `Title ${i}`;
		
		divElement.appendChild(h1Element);

		var pElement = document.createElement("p");
		pElement.class = "content-text";
		pElement.id = `tabs_content_text_${i}`;
	 	pElement.value = `Text ${i}`;

		divElement.appendChild(pElement);
		divElement_tabs_container.appendChild(divElement);
	}
	
	// document.getElementById("display_UI").appendChild(divElement_tabs_container);
	document.body.appendChild(divElement_tabs_container);

	// Dynamically create addEventListener for each `tabs_${i}`.
	for (let i=0; i<tab_num; i++) {
		await tabs_addEventListener(i, tab_num);
	}

	console.log("tabs_container DOM elements: ", document.getElementById('tabs_container'));
}
	
// -----------------------------------------

async function tabs_addEventListener(i, tab_num) {
	
	document.getElementById(`tabs_${i}`).addEventListener("click", async () => {
		// console.log("document.querySelector('.tabs'): ", document.querySelector('.tabs'));
		// console.log("document.querySelector('.tabs-nav-link'): ", document.querySelector('.tabs-nav-link'));

		for (let j=0; j<tab_num; j++) {
			if (i == j) {
				// Only add to "tabs_i"
				document.getElementById(`tabs_${j}`).classList.add('active');
				document.getElementById(`tabs_content_${j}`).style.display = "block";
			} else {
				// Remove from all "tabs_j"
				document.getElementById(`tabs_${j}`).classList.remove('active');
				document.getElementById(`tabs_content_${j}`).style.display = "none";
			}
		}
	});
}

// -----------------------------------------
	
window.addEventListener('beforeunload', function() {
	window.location.href = window.location.href + '?nocache=' + new Date().getTime();
	document.getElementById("dropdown_options").selectedIndex = 0;
});

// -------------------------------------------------
 
</script>
</body>
</html>
